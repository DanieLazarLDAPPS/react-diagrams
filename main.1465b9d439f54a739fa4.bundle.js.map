{"version":3,"file":"main.1465b9d439f54a739fa4.bundle.js","sources":["webpack:///./demos/helpers/demo.scss","webpack:///./demos/demo-locks/index.tsx","webpack:///./demos/demo-serializing/index.tsx","webpack:///../lib-core/dist/index.js","webpack:///../lib-defaults/dist/index.js"],"sourcesContent":["\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/postcss-loader/src/index.js??ref--9-2!../../../node_modules/sass-loader/lib/loader.js!./demo.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/postcss-loader/src/index.js??ref--9-2!../../../node_modules/sass-loader/lib/loader.js!./demo.scss\", function() {\n\t\tvar newContent = require(\"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/postcss-loader/src/index.js??ref--9-2!../../../node_modules/sass-loader/lib/loader.js!./demo.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","import * as React from 'react';\nimport createEngine, {\n\tDiagramModel,\n\tDefaultNodeModel,\n\tDiagramWidget,\n\tDiagramProps\n} from '@projectstorm/react-diagrams';\n\n/**\n *\n * Shows how you can lock down the system so that the entire scene cant be interacted with.\n *\n * @Author Dylan Vorster\n */\nexport default () => {\n\t//1) setup the diagram engine\n\tvar engine = createEngine();\n\n\tvar model = new DiagramModel();\n\n\t// sample for link with simple line (no additional points)\n\tvar node1 = new DefaultNodeModel('Node 1', 'rgb(0,192,255)');\n\tvar port1 = node1.addOutPort('Out');\n\tnode1.setPosition(100, 100);\n\n\tvar node2 = new DefaultNodeModel('Node 2', 'rgb(192,255,0)');\n\tvar port2 = node2.addInPort('In');\n\tnode2.setPosition(400, 100);\n\n\tlet link1 = port1.link(port2);\n\n\tmodel.addAll(node1, node2, link1);\n\n\t// sample for link with complex line (additional points)\n\tvar node3 = new DefaultNodeModel('Node 3', 'rgb(0,192,255)');\n\tvar port3 = node3.addOutPort('Out');\n\tnode3.setPosition(100, 250);\n\n\tvar node4 = new DefaultNodeModel('Node 4', 'rgb(192,255,0)');\n\tvar port4 = node4.addInPort('In');\n\tnode4.setPosition(400, 250);\n\n\tvar link2 = port3.link(port4);\n\n\tlink2.point(350, 225);\n\tlink2.point(200, 225);\n\n\tmodel.addAll(node3, node4, link2);\n\n\tengine.setDiagramModel(model);\n\n\t//!========================================= <<<<<<<\n\n\tmodel.setLocked(true);\n\tvar props = {\n\t\tdiagramEngine: engine,\n\t\tallowLooseLinks: false,\n\t\tallowCanvasTranslation: false,\n\t\tallowCanvasZoom: false\n\t} as DiagramProps;\n\n\t//!=========================================  <<<<<<<\n\n\treturn <DiagramWidget className=\"srd-demo-canvas\" {...props} />;\n};\n","import createEngine, { DiagramModel, DefaultNodeModel, DiagramWidget } from '@projectstorm/react-diagrams';\nimport * as React from 'react';\nimport { DemoWorkspaceWidget } from '../helpers/DemoWorkspaceWidget';\nimport { action } from '@storybook/addon-actions';\nimport * as beautify from 'json-beautify';\n\nexport default () => {\n\t//1) setup the diagram engine\n\tvar engine = createEngine();\n\n\t//2) setup the diagram model\n\tvar model = new DiagramModel();\n\n\t//3-A) create a default node\n\tvar node1 = new DefaultNodeModel('Node 1', 'rgb(0,192,255)');\n\tvar port1 = node1.addOutPort('Out');\n\tnode1.setPosition(100, 100);\n\n\t//3-B) create another default node\n\tvar node2 = new DefaultNodeModel('Node 2', 'rgb(192,255,0)');\n\tvar port2 = node2.addInPort('In');\n\tnode2.setPosition(400, 100);\n\n\t//3-C) link the 2 nodes together\n\tvar link1 = port1.link(port2);\n\n\t//4) add the models to the root graph\n\tmodel.addAll(node1, node2, link1);\n\n\t//5) load model into engine\n\tengine.setDiagramModel(model);\n\n\t//!------------- SERIALIZING ------------------\n\n\tvar str = JSON.stringify(model.serializeDiagram());\n\tconsole.log(model.serializeDiagram());\n\n\t//!------------- DESERIALIZING ----------------\n\n\tvar model2 = new DiagramModel();\n\tmodel2.deSerializeDiagram(JSON.parse(str), engine);\n\tengine.setDiagramModel(model2);\n\n\treturn (\n\t\t<DemoWorkspaceWidget\n\t\t\tbuttons={\n\t\t\t\t<button\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\taction('Serialized Graph')(beautify(model2.serializeDiagram(), null, 2, 80));\n\t\t\t\t\t}}>\n\t\t\t\t\tSerialize Graph\n\t\t\t\t</button>\n\t\t\t}>\n\t\t\t<DiagramWidget className=\"srd-demo-canvas\" diagramEngine={engine} />\n\t\t</DemoWorkspaceWidget>\n\t);\n};\n","!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define([],t):\"object\"==typeof exports?exports[\"projectstorm/react-diagrams-core\"]=t():e[\"projectstorm/react-diagrams-core\"]=t()}(window,function(){return function(e){var t={};function i(s){if(t[s])return t[s].exports;var o=t[s]={i:s,l:!1,exports:{}};return e[s].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=e,i.c=t,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var o in e)i.d(s,o,function(t){return e[t]}.bind(null,o));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,\"a\",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p=\"\",i(i.s=29)}([function(e,t){e.exports=require(\"lodash\")},function(e,t){e.exports=require(\"react\")},function(e,t,i){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const s=i(1);t.BaseWidget=class extends s.Component{constructor(e,t){super(t),this.className=e}bem(e){return(this.props.baseClass||this.className)+e+\" \"}getClassName(){return(this.props.baseClass||this.className)+\" \"+(this.props.className?this.props.className+\" \":\"\")}getProps(){return Object.assign({},this.props.extraProps||{},{className:this.getClassName()})}}},function(e,t,i){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const s=i(16);t.AbstractMouseAction=class extends s.AbstractAction{constructor(e,t,i){super(i),this.mouseX=e,this.mouseY=t}}},function(e,t,i){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const s=i(8),o=i(10);t.BasePositionModel=class extends s.BaseModel{constructor(e){super(e),this.position=e.position||new o.Point(0,0)}setPosition(e,t){this.position=\"object\"==typeof e?e:new o.Point(e,t),this.fireEvent({},\"positionChanged\")}deSerialize(e,t){super.deSerialize(e,t),this.position=new o.Point(e.x,e.y)}serialize(){return Object.assign({},super.serialize(),{x:this.position.x,y:this.position.y})}getPosition(){return this.position}getX(){return this.position.x}getY(){return this.position.y}}},function(e,t,i){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const s=i(37);class o{static UID(){return o.TESTING?(o.TESTING_UID++,`${o.TESTING_UID}`):\"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g,e=>{const t=16*Math.random()|0;return(\"x\"===e?t:3&t|8).toString(16)})}static closest(e,t){return document.body.closest?e.closest(t):s(e,t)}static generateLinePath(e,t){return`M${e.getX()},${e.getY()} L ${t.getX()},${t.getY()}`}}o.TESTING=!1,o.TESTING_UID=0,t.Toolkit=o},function(e,t,i){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const s=i(11);t.AbstractActionFactory=class extends s.AbstractFactory{}},function(e,t,i){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const s=i(4);t.PointModel=class extends s.BasePositionModel{constructor(e){super(Object.assign({},e,{type:\"point\"})),this.parent=e.link}getSelectedEntities(){return super.isSelected()&&!this.isConnectedToPort()?[this]:[]}isConnectedToPort(){return null!==this.parent.getPortForPoint(this)}getLink(){return this.getParent()}remove(){this.parent&&this.parent.removePoint(this),super.remove()}isLocked(){return super.isLocked()||this.getParent().isLocked()}}},function(e,t,i){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const s=i(13);t.BaseModel=class extends s.BaseEntity{constructor(e){super(e)}getParent(){return this.parent}setParent(e){this.parent=e}getSelectedEntities(){return this.isSelected()?[this]:[]}serialize(){return Object.assign({},super.serialize(),{type:this.options.type,selected:this.options.selected,extras:this.options.extras})}deSerialize(e,t){super.deSerialize(e,t),this.options.extras=e.extras,this.options.selected=e.selected}getType(){return this.options.type}isSelected(){return this.options.selected}setSelected(e=!0){this.options.selected=e,this.fireEvent({isSelected:e},\"selectionChanged\")}remove(){this.fireEvent({},\"entityRemoved\")}}},function(e,t,i){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const s=i(5);t.BaseObserver=class{constructor(){this.listeners={}}fireEventInternal(e,t,i){this.iterateListeners(s=>{if(!e&&!i.firing)return!1;s[t]&&s[t](i)})}fireEvent(e,t){e=Object.assign({firing:!0,stopPropagation:()=>{e.firing=!1}},e),this.fireEventInternal(!0,\"eventWillFire\",Object.assign({},e,{function:t})),this.fireEventInternal(!1,t,e),this.fireEventInternal(!0,\"eventDidFire\",Object.assign({},e,{function:t}))}iterateListeners(e){for(let t in this.listeners)if(!1===e(this.listeners[t]))return}getListenerHandle(e){for(let t in this.listeners)if(this.listeners[t]===e)return{id:t,listner:e,deregister:()=>{delete this.listeners[t]}}}registerListener(e){const t=s.Toolkit.UID();return this.listeners[t]=e,{id:t,listner:e,deregister:()=>{delete this.listeners[t]}}}deregisterListener(e){if(\"object\"==typeof e)return e.deregister(),!0;const t=this.getListenerHandle(e);return!!t&&(t.deregister(),!0)}}},function(e,t){e.exports=require(\"@projectstorm/react-diagrams-geometry\")},function(e,t,i){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});t.AbstractFactory=class{constructor(e){this.type=e}setDiagramEngine(e){this.engine=e}setFactoryBank(e){this.bank=e}getType(){return this.type}}},function(e,t,i){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const s=i(3),o=i(0);t.SelectingAction=class extends s.AbstractMouseAction{constructor(e,t,i){super(e,t,i),this.mouseX2=e,this.mouseY2=t}getBoxDimensions(){return{left:this.mouseX2>this.mouseX?this.mouseX:this.mouseX2,top:this.mouseY2>this.mouseY?this.mouseY:this.mouseY2,width:Math.abs(this.mouseX2-this.mouseX),height:Math.abs(this.mouseY2-this.mouseY),right:this.mouseX2<this.mouseX?this.mouseX:this.mouseX2,bottom:this.mouseY2<this.mouseY?this.mouseY:this.mouseY2}}containsElement(e,t,i){var s=i.getZoomLevel()/100;let o=this.getBoxDimensions();return e*s+i.getOffsetX()>o.left&&e*s+i.getOffsetX()<o.right&&t*s+i.getOffsetY()>o.top&&t*s+i.getOffsetY()<o.bottom}fireMouseMove(e){var t=this.engine.getRelativePoint(e.clientX,e.clientY);o.forEach(this.model.getNodes(),e=>{this.containsElement(e.getX(),e.getY(),this.model)&&e.setSelected(!0)}),o.forEach(this.model.getLinks(),e=>{var t=!0;o.forEach(e.getPoints(),e=>{this.containsElement(e.getX(),e.getY(),this.model)?e.setSelected(!0):t=!1}),t&&e.setSelected(!0)}),this.mouseX2=t.x,this.mouseY2=t.y}fireMouseUp(e){}fireMouseDown(e){}}},function(e,t,i){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const s=i(5),o=i(0),n=i(9);t.BaseEntity=class extends n.BaseObserver{constructor(e={}){super(),this.options=Object.assign({id:s.Toolkit.UID()},e)}getOptions(){return this.options}getID(){return this.options.id}doClone(e={},t){}clone(e={}){if(e[this.options.id])return e[this.options.id];let t=o.clone(this);return t.options=Object.assign({},this.options,{id:s.Toolkit.UID()}),t.clearListeners(),e[this.options.id]=t,this.doClone(e,t),t}clearListeners(){this.listeners={}}deSerialize(e,t){this.options.id=e.id,this.options.locked=e.locked}serialize(){return{id:this.options.id,locked:this.options.locked}}fireEvent(e,t){super.fireEvent(Object.assign({entity:this},e),t)}isLocked(){return this.options.locked}setLocked(e=!0){this.options.locked=e,this.fireEvent({locked:e},\"lockChanged\")}}},function(e,t,i){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const s=i(0),o=i(4);t.NodeModel=class extends o.BasePositionModel{constructor(e){super(e),this.ports={},this.width=0,this.height=0}setPosition(e,t){let i=this.position;super.setPosition(e,t),s.forEach(this.ports,o=>{s.forEach(o.getLinks(),s=>{let n=s.getPointForPort(o);n.setPosition(n.getX()+e-i.x,n.getY()+t-i.y)})})}getSelectedEntities(){let e=super.getSelectedEntities();return this.isSelected()&&s.forEach(this.ports,t=>{e=e.concat(s.map(t.getLinks(),e=>e.getPointForPort(t)))}),e}deSerialize(e,t){super.deSerialize(e,t),s.forEach(e.ports,e=>{let i=t.getFactoryForPort(e.type).generateModel({});i.deSerialize(e,t),this.addPort(i)})}serialize(){return Object.assign({},super.serialize(),{ports:s.map(this.ports,e=>e.serialize())})}doClone(e={},t){t.ports={},s.forEach(this.ports,i=>{t.addPort(i.clone(e))})}remove(){super.remove(),s.forEach(this.ports,e=>{s.forEach(e.getLinks(),e=>{e.remove()})})}getPortFromID(e){for(var t in this.ports)if(this.ports[t].getID()===e)return this.ports[t];return null}getLink(e){for(let t in this.ports){const i=this.ports[t].getLinks();if(i[e])return i[e]}}getPort(e){return this.ports[e]}getPorts(){return this.ports}removePort(e){this.ports[e.getName()]&&(this.ports[e.getName()].setParent(null),delete this.ports[e.getName()])}addPort(e){return e.setParent(this),this.ports[e.getName()]=e,e}updateDimensions({width:e,height:t}){this.width=e,this.height=t}}},function(e,t,i){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const s=i(0),o=i(4),n=i(10);!function(e){e.TOP=\"top\",e.LEFT=\"left\",e.BOTTOM=\"bottom\",e.RIGHT=\"right\"}(t.PortModelAlignment||(t.PortModelAlignment={}));t.PortModel=class extends o.BasePositionModel{constructor(e){super(e),this.links={},this.reportedPosition=!1}deSerialize(e,t){super.deSerialize(e,t),this.reportedPosition=!1,this.options.name=e.name,this.options.alignment=e.alignment}serialize(){return Object.assign({},super.serialize(),{name:this.options.name,alignment:this.options.alignment,parentNode:this.parent.getID(),links:s.map(this.links,e=>e.getID())})}doClone(e={},t){t.links={},t.parentNode=this.getParent().clone(e)}getNode(){return this.getParent()}getName(){return this.options.name}getMaximumLinks(){return this.options.maximumLinks}setMaximumLinks(e){this.options.maximumLinks=e}removeLink(e){delete this.links[e.getID()]}addLink(e){this.links[e.getID()]=e}getLinks(){return this.links}createLinkModel(){if(s.isFinite(this.options.maximumLinks)){var e=s.size(this.links);if(1===this.options.maximumLinks&&e>=1)return s.values(this.links)[0];if(e>=this.options.maximumLinks)return null}return null}updateCoords(e){const{x:t,y:i,width:o,height:r}=e;this.width=o,this.height=r,this.setPosition(t,i);const a=new n.Point(t+o/2,i+r/2);s.forEach(this.getLinks(),e=>{e.getPointForPort(this).setPosition(a.clone())}),this.reportedPosition=!0,this.fireEvent({entity:this},\"reportInitialPosition\")}canLinkToPort(e){return!0}isLocked(){return super.isLocked()||this.getParent().isLocked()}}},function(e,t,i){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});t.AbstractAction=class{constructor(e){this.engine=e,this.model=e.getDiagramModel()}}},function(e,t,i){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const s=i(3);t.MoveCanvasAction=class extends s.AbstractMouseAction{constructor(e,t,i){super(e,t,i),this.initialOffsetX=this.model.getOffsetX(),this.initialOffsetY=this.model.getOffsetY()}fireMouseMove(e){this.model.setOffset(this.initialOffsetX+(e.clientX-this.mouseX),this.initialOffsetY+(e.clientY-this.mouseY))}fireMouseUp(e){}fireMouseDown(e){this.model.clearSelection()}}},function(e,t,i){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const s=i(3),o=i(7),n=i(14),r=i(4),a=i(0),l=i(15);t.MoveItemsAction=class extends s.AbstractMouseAction{constructor(e,t,i,s){super(e,t,i),this.allowLooseLinks=s,this.moved=!1}fireMouseMove(e){let t=e.clientX-this.mouseX,i=e.clientY-this.mouseY,s=this.model.getZoomLevel()/100;a.forEach(this.selectionModels,e=>{e.model instanceof n.NodeModel||e.model instanceof o.PointModel&&!e.model.isConnectedToPort()?e.model.setPosition(this.model.getGridPosition(e.initialX+t/s),this.model.getGridPosition(e.initialY+i/s)):e.model instanceof o.PointModel&&e.model.setPosition(e.initialX+this.model.getGridPosition(t/s),e.initialY+this.model.getGridPosition(i/s))}),this.moved=!0}fireMouseUp(e){const t=this.engine.getMouseElement(e);a.forEach(this.selectionModels,e=>{if(e.model instanceof o.PointModel&&t&&t.model instanceof l.PortModel&&!this.engine.isModelLocked(t.model)){let i=e.model.getLink();if(i.getTargetPort())if(i.getTargetPort()!==t.model&&i.getSourcePort()!==t.model){const s=i.getTargetPort();let o=i.clone({});o.setSourcePort(t.model),o.setTargetPort(s),i.setTargetPort(t.model),i.getLastPoint().setPosition(this.engine.getPortCenter(t.model)),s.removeLink(i),o.removePointsBefore(o.getPoints()[i.getPointIndex(e.model)]),i.removePointsAfter(e.model),this.engine.getDiagramModel().addLink(o)}else i.getTargetPort()===t.model?i.removePointsAfter(e.model):i.getSourcePort()===t.model&&i.removePointsBefore(e.model);else i.setTargetPort(t.model),i.getLastPoint().setPosition(this.engine.getPortCenter(t.model))}}),!this.allowLooseLinks&&this.moved&&a.forEach(this.selectionModels,e=>{if(!(e.model instanceof o.PointModel))return;let t=e.model.getLink();null!==t.getSourcePort()&&null!==t.getTargetPort()||t.remove()}),a.forEach(this.selectionModels,e=>{if(!(e.model instanceof o.PointModel))return;let t=e.model.getLink(),i=t.getSourcePort(),s=t.getTargetPort();null!==i&&null!==s&&(i.canLinkToPort(s)?a.some(a.values(s.getLinks()),e=>e!==t&&(e.getSourcePort()===i||e.getTargetPort()===i))&&t.remove():t.remove())})}fireMouseDown(e){if(e.selectedModel.isSelected()||this.model.clearSelection(),e.selectedModel instanceof l.PortModel){if(!this.engine.isModelLocked(e.selectedModel)){const t=this.engine.getPortCenter(e.selectedModel),i=e.selectedModel,s=i.createLinkModel();s.setSourcePort(i),s&&(s.removeMiddlePoints(),s.getSourcePort()!==i&&s.setSourcePort(i),s.setTargetPort(null),s.getFirstPoint().setPosition(t),s.getLastPoint().setPosition(t),this.model.clearSelection(),s.getLastPoint().setSelected(!0),this.model.addLink(s))}}else e.selectedModel.setSelected(!0);const t=this.model.getSelectedItems().filter(e=>e instanceof r.BasePositionModel&&!this.engine.isModelLocked(e));this.selectionModels=t.map(e=>({model:e,initialX:e.getX(),initialY:e.getY()}))}}},function(e,t,i){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const s=i(6),o=i(18);class n extends s.AbstractActionFactory{constructor(e={}){super(n.NAME),this.options=Object.assign({},e,{allowLooseLinks:null==e.allowLooseLinks||e.allowLooseLinks})}generateAction(e){return new o.MoveItemsAction(e.clientX,e.clientY,this.engine,this.options.allowLooseLinks)}activate(e){return!!e.selectedModel&&!this.engine.isModelLocked(e.selectedModel)}}n.NAME=\"move-items\",t.MoveItemsActionFactory=n},function(e,t,i){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const s=i(9),o=i(0);t.FactoryBank=class extends s.BaseObserver{constructor(){super(),this.factories={}}getFactories(){return o.values(this.factories)}clearFactories(){for(let e in this.factories)this.deregisterFactory(e)}getFactory(e){if(!this.factories[e])throw new Error(`Cannot find factory with type [${e}]`);return this.factories[e]}registerFactory(e){e.setFactoryBank(this),this.factories[e.getType()]=e,this.fireEvent({factory:e},\"factoryAdded\")}deregisterFactory(e){const t=this.factories[e];t.setFactoryBank(null),delete this.factories[e],this.fireEvent({factory:t},\"factoryRemoved\")}}},function(e,t,i){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const s=i(11);t.AbstractModelFactory=class extends s.AbstractFactory{}},function(e,t,i){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const s=i(13),o=i(0),n=i(23),r=i(14),a=i(15),l=i(7);t.DiagramModel=class extends s.BaseEntity{constructor(e={}){super(Object.assign({zoom:100,gridSize:0,offsetX:0,offsetY:0},e)),this.links={},this.nodes={},this.rendered=!1}setGridSize(e=0){this.options.gridSize=e,this.fireEvent({size:e},\"gridUpdated\")}getGridPosition(e){return 0===this.options.gridSize?e:this.options.gridSize*Math.floor((e+this.options.gridSize/2)/this.options.gridSize)}deSerializeDiagram(e,t){this.deSerialize(e,t),this.options.offsetX=e.offsetX,this.options.offsetY=e.offsetY,this.options.zoom=e.zoom,this.options.gridSize=e.gridSize,o.forEach(e.nodes,e=>{let i=t.getFactoryForNode(e.type).generateModel({initialConfig:e});i.setParent(this),i.deSerialize(e,t),this.addNode(i)}),o.forEach(e.links,e=>{let i=t.getFactoryForLink(e.type).generateModel({initialConfig:e});i.setParent(this),i.deSerialize(e,t),this.addLink(i)})}serializeDiagram(){return Object.assign({},this.serialize(),{offsetX:this.options.offsetX,offsetY:this.options.offsetY,zoom:this.options.zoom,gridSize:this.options.gridSize,links:o.map(this.links,e=>e.serialize()),nodes:o.map(this.nodes,e=>e.serialize())})}clearSelection(e=null){o.forEach(this.getSelectedItems(),t=>{e&&e.getID()===t.getID()||t.setSelected(!1)})}getSelectedItems(...e){Array.isArray(e)||(e=[e]);var t=[];return t=(t=(t=t.concat(o.flatMap(this.nodes,e=>e.getSelectedEntities()))).concat(o.flatMap(this.links,e=>e.getSelectedEntities()))).concat(o.flatMap(this.links,e=>o.flatMap(e.getPoints(),e=>e.getSelectedEntities()))),t=o.uniq(t),e.length>0&&(t=o.filter(o.uniq(t),t=>!!(o.includes(e,\"node\")&&t instanceof r.NodeModel||o.includes(e,\"link\")&&t instanceof n.LinkModel||o.includes(e,\"port\")&&t instanceof a.PortModel||o.includes(e,\"point\")&&t instanceof l.PointModel))),t}setZoomLevel(e){this.options.zoom=e,this.fireEvent({zoom:e},\"zoomUpdated\")}setOffset(e,t){this.options.offsetX=e,this.options.offsetY=t,this.fireEvent({offsetX:e,offsetY:t},\"offsetUpdated\")}setOffsetX(e){this.setOffset(e,this.options.offsetY)}setOffsetY(e){this.setOffset(this.options.offsetX,e)}getOffsetY(){return this.options.offsetY}getOffsetX(){return this.options.offsetX}getZoomLevel(){return this.options.zoom}getNode(e){return e instanceof r.NodeModel?e:this.nodes[e]?this.nodes[e]:null}getLink(e){return e instanceof n.LinkModel?e:this.links[e]?this.links[e]:null}addAll(...e){return o.forEach(e,e=>{e instanceof n.LinkModel?this.addLink(e):e instanceof r.NodeModel&&this.addNode(e)}),e}addLink(e){return e.registerListener({entityRemoved:()=>{this.removeLink(e)}}),this.links[e.getID()]=e,this.fireEvent({link:e,isCreated:!0},\"linksUpdated\"),e}addNode(e){return e.registerListener({entityRemoved:()=>{this.removeNode(e)}}),this.nodes[e.getID()]=e,this.fireEvent({node:e,isCreated:!0},\"nodesUpdated\"),e}removeLink(e){e=this.getLink(e),delete this.links[e.getID()],this.fireEvent({link:e,isCreated:!1},\"linksUpdated\")}removeNode(e){e=this.getNode(e),delete this.nodes[e.getID()],this.fireEvent({node:e,isCreated:!1},\"nodesUpdated\")}getLinks(){return this.links}getNodes(){return this.nodes}}},function(e,t,i){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const s=i(8),o=i(7),n=i(0),r=i(10);t.LinkModel=class extends s.BaseModel{constructor(e){super(e),this.points=[new o.PointModel({link:this}),new o.PointModel({link:this})],this.sourcePort=null,this.targetPort=null,this.renderedPaths=[],this.labels=[]}deSerialize(e,t){super.deSerialize(e,t),this.points=n.map(e.points||[],e=>{var i=new o.PointModel({link:this,position:new r.Point(e.x,e.y)});return i.deSerialize(e,t),i}),n.forEach(e.labels||[],e=>{let i=t.getFactoryForLabel(e.type).generateModel({});i.deSerialize(e,t),this.addLabel(i)}),e.target&&this.setTargetPort(this.getParent().getNode(e.target).getPortFromID(e.targetPort)),e.source&&this.setSourcePort(this.getParent().getNode(e.source).getPortFromID(e.sourcePort))}getRenderedPath(){return this.renderedPaths}setRenderedPaths(e){this.renderedPaths=e}serialize(){return Object.assign({},super.serialize(),{source:this.sourcePort?this.sourcePort.getParent().getID():null,sourcePort:this.sourcePort?this.sourcePort.getID():null,target:this.targetPort?this.targetPort.getParent().getID():null,targetPort:this.targetPort?this.targetPort.getID():null,points:n.map(this.points,e=>e.serialize()),labels:n.map(this.labels,e=>e.serialize())})}doClone(e={},t){t.setPoints(n.map(this.getPoints(),t=>t.clone(e))),this.sourcePort&&t.setSourcePort(this.sourcePort.clone(e)),this.targetPort&&t.setTargetPort(this.targetPort.clone(e))}remove(){this.sourcePort&&this.sourcePort.removeLink(this),this.targetPort&&this.targetPort.removeLink(this),super.remove()}isLastPoint(e){return this.getPointIndex(e)===this.points.length-1}getPointIndex(e){return this.points.indexOf(e)}getPointModel(e){for(var t=0;t<this.points.length;t++)if(this.points[t].getID()===e)return this.points[t];return null}getPortForPoint(e){return null!==this.sourcePort&&this.getFirstPoint().getID()===e.getID()?this.sourcePort:null!==this.targetPort&&this.getLastPoint().getID()===e.getID()?this.targetPort:null}getPointForPort(e){return null!==this.sourcePort&&this.sourcePort.getID()===e.getID()?this.getFirstPoint():null!==this.targetPort&&this.targetPort.getID()===e.getID()?this.getLastPoint():null}getFirstPoint(){return this.points[0]}getLastPoint(){return this.points[this.points.length-1]}setSourcePort(e){null!==e&&e.addLink(this),null!==this.sourcePort&&this.sourcePort.removeLink(this),this.sourcePort=e,this.fireEvent({port:e},\"sourcePortChanged\")}getSourcePort(){return this.sourcePort}getTargetPort(){return this.targetPort}setTargetPort(e){null!==e&&e.addLink(this),null!==this.targetPort&&this.targetPort.removeLink(this),this.targetPort=e,this.fireEvent({port:e},\"targetPortChanged\")}point(e,t){return this.addPoint(this.generatePoint(e,t))}addLabel(e){e.setParent(this),this.labels.push(e)}getPoints(){return this.points}getLabels(){return this.labels}setPoints(e){n.forEach(e,e=>{e.setParent(this)}),this.points=e}removePoint(e){this.points.splice(this.getPointIndex(e),1)}removePointsBefore(e){this.points.splice(0,this.getPointIndex(e))}removePointsAfter(e){this.points.splice(this.getPointIndex(e)+1)}removeMiddlePoints(){this.points.length>2&&this.points.splice(0,this.points.length-2)}addPoint(e,t=1){return e.setParent(this),this.points.splice(t,0,e),e}generatePoint(e=0,t=0){return new o.PointModel({link:this,position:new r.Point(e,t)})}}},function(e,t,i){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const s=i(1),o=i(25),n=i(0),r=i(2);t.LinkLayerWidget=class extends r.BaseWidget{constructor(e){super(\"srd-link-layer\",e)}render(){var e=this.props.diagramEngine.getDiagramModel();return s.createElement(\"svg\",Object.assign({},this.getProps(),{style:{transform:\"translate(\"+e.getOffsetX()+\"px,\"+e.getOffsetY()+\"px) scale(\"+e.getZoomLevel()/100+\")\"}}),n.map(e.getLinks(),e=>s.createElement(o.LinkWidget,{pointAdded:this.props.pointAdded,key:e.getID(),link:e,diagramEngine:this.props.diagramEngine})))}}},function(e,t,i){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const s=i(1),o=i(0),n=i(41),r=i(26);t.LinkWidget=class extends s.Component{constructor(e){super(e),this.state={sourceID:null,targetID:null}}componentWillUnmount(){this.sourceListener&&this.sourceListener.deregister(),this.targetListener&&this.targetListener.deregister()}static getDerivedStateFromProps(e,t){return{sourceID:e.link.getSourcePort(),targetID:e.link.getTargetPort()}}ensureInstalled(e,t){e&&(this.sourceListener=this.props.link.getSourcePort().registerListener({reportInitialPosition:e=>{this.forceUpdate()}})),t&&(this.targetListener=this.props.link.getTargetPort().registerListener({reportInitialPosition:e=>{this.forceUpdate()}}))}componentDidUpdate(e,t,i){let s=!1,o=!1;this.state.sourceID!==t.sourceID&&(this.sourceListener&&this.sourceListener.deregister(),s=!0),this.state.targetID!==t.targetID&&(this.targetListener&&this.targetListener.deregister(),o=!0),this.ensureInstalled(s,o)}componentDidMount(){this.ensureInstalled(!!this.props.link.getSourcePort(),!!this.props.link.getTargetPort())}render(){const{link:e}=this.props;return e.getSourcePort()&&!e.getSourcePort().reportedPosition?null:e.getTargetPort()&&!e.getTargetPort().reportedPosition?null:s.createElement(r.PeformanceWidget,{serialized:this.props.link.serialize()},()=>s.createElement(\"g\",null,s.cloneElement(this.props.diagramEngine.generateWidgetForLink(e),{pointAdded:this.props.pointAdded}),o.map(this.props.link.getLabels(),(e,t)=>s.createElement(n.LabelWidget,{engine:this.props.diagramEngine,label:e,index:t}))))}}},function(e,t,i){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const s=i(1),o=i(0);t.PeformanceWidget=class extends s.Component{shouldComponentUpdate(e,t,i){return!o.isEqual(this.props.serialized,e.serialized)}render(){return this.props.children()}}},function(e,t,i){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const s=i(1),o=i(0),n=i(28),r=i(2);t.NodeLayerWidget=class extends r.BaseWidget{constructor(e){super(\"srd-node-layer\",e)}render(){var e=this.props.diagramEngine.getDiagramModel();return s.createElement(\"div\",Object.assign({},this.getProps(),{style:{transform:\"translate(\"+e.getOffsetX()+\"px,\"+e.getOffsetY()+\"px) scale(\"+e.getZoomLevel()/100+\")\"}}),o.map(e.getNodes(),e=>s.createElement(n.NodeWidget,{key:e.getID(),diagramEngine:this.props.diagramEngine,node:e})))}}},function(e,t,i){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const s=i(1),o=i(0),n=i(2),r=i(26);t.NodeWidget=class extends n.BaseWidget{constructor(e){super(\"srd-node\",e),this.ref=s.createRef()}getClassName(){return\"node \"+super.getClassName()+(this.props.node.isSelected()?this.bem(\"--selected\"):\"\")}componentWillUnmount(){this.ob.disconnect(),this.ob=null}componentDidUpdate(e,t,i){this.listener&&this.props.node!==e.node&&(this.listener.deregister(),this.installSelectionListener())}installSelectionListener(){this.listener=this.props.node.registerListener({selectionChanged:e=>{this.forceUpdate()}})}componentDidMount(){this.ob=new ResizeObserver(e=>{const t=e[0].contentRect;this.props.node.updateDimensions({width:t.width,height:t.height}),o.forEach(this.props.node.getPorts(),e=>{e.updateCoords(this.props.diagramEngine.getPortCoords(e))})}),this.ob.observe(this.ref.current),this.installSelectionListener()}render(){return s.createElement(r.PeformanceWidget,{serialized:this.props.node.serialize()},()=>s.createElement(\"div\",Object.assign({ref:this.ref},this.getProps(),{\"data-nodeid\":this.props.node.getID(),style:{top:this.props.node.getY(),left:this.props.node.getX()}}),this.props.diagramEngine.generateWidgetForNode(this.props.node)))}}},function(e,t,i){\"use strict\";function s(e){for(var i in e)t.hasOwnProperty(i)||(t[i]=e[i])}Object.defineProperty(t,\"__esModule\",{value:!0}),i(30),s(i(16)),s(i(6)),s(i(3)),s(i(35)),s(i(17)),s(i(12)),s(i(36)),s(i(18)),s(i(19)),s(i(9)),s(i(20)),s(i(11)),s(i(21)),s(i(38)),s(i(8)),s(i(4)),s(i(13)),s(i(22)),s(i(39)),s(i(23)),s(i(7)),s(i(15)),s(i(14)),s(i(2)),s(i(40)),s(i(24)),s(i(27)),s(i(25)),s(i(28)),s(i(43)),s(i(44)),s(i(5))},function(e,t,i){var s=i(31);\"string\"==typeof s&&(s=[[e.i,s,\"\"]]);var o={hmr:!0,transform:void 0,insertInto:void 0};i(33)(s,o);s.locals&&(e.exports=s.locals)},function(e,t,i){(e.exports=i(32)(!1)).push([e.i,\".srd-diagram {\\n  position: relative;\\n  flex-grow: 1;\\n  display: flex;\\n  cursor: move;\\n  overflow: hidden; }\\n  .srd-diagram__selector {\\n    position: absolute;\\n    background-color: rgba(0, 192, 255, 0.2);\\n    border: solid 2px #00c0ff; }\\n\\n.srd-link-layer {\\n  position: absolute;\\n  height: 100%;\\n  width: 100%;\\n  transform-origin: 0 0;\\n  overflow: visible !important;\\n  top: 0;\\n  bottom: 0;\\n  left: 0;\\n  right: 0; }\\n\\n.srd-node-layer {\\n  top: 0;\\n  left: 0;\\n  right: 0;\\n  bottom: 0;\\n  position: absolute;\\n  pointer-events: none;\\n  transform-origin: 0 0;\\n  width: 100%;\\n  height: 100%; }\\n\\n.srd-node {\\n  position: absolute;\\n  -webkit-touch-callout: none;\\n  /* iOS Safari */\\n  -webkit-user-select: none;\\n  /* Chrome/Safari/Opera */\\n  user-select: none;\\n  cursor: move;\\n  pointer-events: all; }\\n  .srd-node--selected > * {\\n    border-color: #00c0ff !important; }\\n\\n.srd-port {\\n  width: 15px;\\n  height: 15px;\\n  background: rgba(255, 255, 255, 0.1); }\\n  .srd-port:hover, .srd-port.selected {\\n    background: #c0ff00; }\\n\",\"\"])},function(e,t,i){\"use strict\";e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var i=function(e,t){var i=e[1]||\"\",s=e[3];if(!s)return i;if(t&&\"function\"==typeof btoa){var o=(r=s,a=btoa(unescape(encodeURIComponent(JSON.stringify(r)))),l=\"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(a),\"/*# \".concat(l,\" */\")),n=s.sources.map(function(e){return\"/*# sourceURL=\".concat(s.sourceRoot).concat(e,\" */\")});return[i].concat(n).concat([o]).join(\"\\n\")}var r,a,l;return[i].join(\"\\n\")}(t,e);return t[2]?\"@media \".concat(t[2],\"{\").concat(i,\"}\"):i}).join(\"\")},t.i=function(e,i){\"string\"==typeof e&&(e=[[null,e,\"\"]]);for(var s={},o=0;o<this.length;o++){var n=this[o][0];null!=n&&(s[n]=!0)}for(var r=0;r<e.length;r++){var a=e[r];null!=a[0]&&s[a[0]]||(i&&!a[2]?a[2]=i:i&&(a[2]=\"(\".concat(a[2],\") and (\").concat(i,\")\")),t.push(a))}},t}},function(e,t,i){var s,o,n={},r=(s=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===o&&(o=s.apply(this,arguments)),o}),a=function(e){var t={};return function(e,i){if(\"function\"==typeof e)return e();if(void 0===t[e]){var s=function(e,t){return t?t.querySelector(e):document.querySelector(e)}.call(this,e,i);if(window.HTMLIFrameElement&&s instanceof window.HTMLIFrameElement)try{s=s.contentDocument.head}catch(e){s=null}t[e]=s}return t[e]}}(),l=null,c=0,d=[],h=i(34);function u(e,t){for(var i=0;i<e.length;i++){var s=e[i],o=n[s.id];if(o){o.refs++;for(var r=0;r<o.parts.length;r++)o.parts[r](s.parts[r]);for(;r<s.parts.length;r++)o.parts.push(v(s.parts[r],t))}else{var a=[];for(r=0;r<s.parts.length;r++)a.push(v(s.parts[r],t));n[s.id]={id:s.id,refs:1,parts:a}}}}function g(e,t){for(var i=[],s={},o=0;o<e.length;o++){var n=e[o],r=t.base?n[0]+t.base:n[0],a={css:n[1],media:n[2],sourceMap:n[3]};s[r]?s[r].parts.push(a):i.push(s[r]={id:r,parts:[a]})}return i}function p(e,t){var i=a(e.insertInto);if(!i)throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");var s=d[d.length-1];if(\"top\"===e.insertAt)s?s.nextSibling?i.insertBefore(t,s.nextSibling):i.appendChild(t):i.insertBefore(t,i.firstChild),d.push(t);else if(\"bottom\"===e.insertAt)i.appendChild(t);else{if(\"object\"!=typeof e.insertAt||!e.insertAt.before)throw new Error(\"[Style Loader]\\n\\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\\n Must be 'top', 'bottom', or Object.\\n (https://github.com/webpack-contrib/style-loader#insertat)\\n\");var o=a(e.insertAt.before,i);i.insertBefore(t,o)}}function f(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=d.indexOf(e);t>=0&&d.splice(t,1)}function m(e){var t=document.createElement(\"style\");if(void 0===e.attrs.type&&(e.attrs.type=\"text/css\"),void 0===e.attrs.nonce){var s=function(){0;return i.nc}();s&&(e.attrs.nonce=s)}return P(t,e.attrs),p(e,t),t}function P(e,t){Object.keys(t).forEach(function(i){e.setAttribute(i,t[i])})}function v(e,t){var i,s,o,n;if(t.transform&&e.css){if(!(n=\"function\"==typeof t.transform?t.transform(e.css):t.transform.default(e.css)))return function(){};e.css=n}if(t.singleton){var r=c++;i=l||(l=m(t)),s=M.bind(null,i,r,!1),o=M.bind(null,i,r,!0)}else e.sourceMap&&\"function\"==typeof URL&&\"function\"==typeof URL.createObjectURL&&\"function\"==typeof URL.revokeObjectURL&&\"function\"==typeof Blob&&\"function\"==typeof btoa?(i=function(e){var t=document.createElement(\"link\");return void 0===e.attrs.type&&(e.attrs.type=\"text/css\"),e.attrs.rel=\"stylesheet\",P(t,e.attrs),p(e,t),t}(t),s=function(e,t,i){var s=i.css,o=i.sourceMap,n=void 0===t.convertToAbsoluteUrls&&o;(t.convertToAbsoluteUrls||n)&&(s=h(s));o&&(s+=\"\\n/*# sourceMappingURL=data:application/json;base64,\"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+\" */\");var r=new Blob([s],{type:\"text/css\"}),a=e.href;e.href=URL.createObjectURL(r),a&&URL.revokeObjectURL(a)}.bind(null,i,t),o=function(){f(i),i.href&&URL.revokeObjectURL(i.href)}):(i=m(t),s=function(e,t){var i=t.css,s=t.media;s&&e.setAttribute(\"media\",s);if(e.styleSheet)e.styleSheet.cssText=i;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(i))}}.bind(null,i),o=function(){f(i)});return s(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;s(e=t)}else o()}}e.exports=function(e,t){if(\"undefined\"!=typeof DEBUG&&DEBUG&&\"object\"!=typeof document)throw new Error(\"The style-loader cannot be used in a non-browser environment\");(t=t||{}).attrs=\"object\"==typeof t.attrs?t.attrs:{},t.singleton||\"boolean\"==typeof t.singleton||(t.singleton=r()),t.insertInto||(t.insertInto=\"head\"),t.insertAt||(t.insertAt=\"bottom\");var i=g(e,t);return u(i,t),function(e){for(var s=[],o=0;o<i.length;o++){var r=i[o];(a=n[r.id]).refs--,s.push(a)}e&&u(g(e,t),t);for(o=0;o<s.length;o++){var a;if(0===(a=s[o]).refs){for(var l=0;l<a.parts.length;l++)a.parts[l]();delete n[a.id]}}}};var y,b=(y=[],function(e,t){return y[e]=t,y.filter(Boolean).join(\"\\n\")});function M(e,t,i,s){var o=i?\"\":s.css;if(e.styleSheet)e.styleSheet.cssText=b(t,o);else{var n=document.createTextNode(o),r=e.childNodes;r[t]&&e.removeChild(r[t]),r.length?e.insertBefore(n,r[t]):e.appendChild(n)}}},function(e,t){e.exports=function(e){var t=\"undefined\"!=typeof window&&window.location;if(!t)throw new Error(\"fixUrls requires window.location\");if(!e||\"string\"!=typeof e)return e;var i=t.protocol+\"//\"+t.host,s=i+t.pathname.replace(/\\/[^\\/]*$/,\"/\");return e.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi,function(e,t){var o,n=t.trim().replace(/^\"(.*)\"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});return/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/|\\s*$)/i.test(n)?e:(o=0===n.indexOf(\"//\")?n:0===n.indexOf(\"/\")?i+n:s+n.replace(/^\\.\\//,\"\"),\"url(\"+JSON.stringify(o)+\")\")})}},function(e,t,i){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const s=i(6),o=i(17);t.MoveCanvasActionFactory=class extends s.AbstractActionFactory{constructor(){super(\"move-canvas\")}generateAction(e){return new o.MoveCanvasAction(e.clientX,e.clientY,this.engine)}activate(e){return!e.selectedEntity&&!e.mouseEvent.shiftKey}}},function(e,t,i){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const s=i(6),o=i(12);t.SelectingItemsActionFactory=class extends s.AbstractActionFactory{constructor(){super(\"select-items\")}generateAction(e){return new o.SelectingAction(e.clientX,e.clientY,this.engine)}activate(e){return!e.selectedEntity&&e.mouseEvent.shiftKey}}},function(e,t){e.exports=require(\"closest\")},function(e,t,i){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const s=i(21);t.AbstractReactFactory=class extends s.AbstractModelFactory{}},function(e,t,i){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const s=i(8);t.LabelModel=class extends s.BaseModel{constructor(e){super(Object.assign({},e,{offsetX:e.offsetX||0,offsetY:e.offsetY||0}))}deSerialize(e,t){super.deSerialize(e,t),this.options.offsetX=e.offsetX,this.options.offsetY=e.offsetY}serialize(){return Object.assign({},super.serialize(),{offsetX:this.options.offsetX,offsetY:this.options.offsetY})}}},function(e,t,i){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const s=i(1),o=i(0),n=i(24),r=i(27),a=i(3),l=i(12),c=i(2),d=i(19);t.DiagramWidget=class extends c.BaseWidget{constructor(e){super(\"srd-diagram\",e),this.onKeyUpPointer=null,this.onMouseUp=e=>{this.state.action&&this.state.action instanceof a.AbstractMouseAction&&this.state.action.fireMouseUp(e),this.stopFiringAction(),document.removeEventListener(\"mousemove\",this.onMouseMove),document.removeEventListener(\"mouseup\",this.onMouseUp)},this.onMouseMove=e=>{this.state.action&&(this.state.action&&this.state.action instanceof a.AbstractMouseAction&&this.state.action.fireMouseMove(e),this.fireAction(),this.forceUpdate())},this.onKeyUp=e=>{-1!==(this.props.deleteKeys||[46,8]).indexOf(e.keyCode)&&(o.forEach(this.props.diagramEngine.getDiagramModel().getSelectedItems(),e=>{this.props.diagramEngine.isModelLocked(e)||e.remove()}),this.forceUpdate())},this.ref=s.createRef(),this.state={action:null,diagramEngineListener:null}}componentWillUnmount(){this.props.diagramEngine.deregisterListener(this.state.diagramEngineListener),this.props.diagramEngine.setCanvas(null),window.removeEventListener(\"keyup\",this.onKeyUpPointer),window.removeEventListener(\"mouseUp\",this.onMouseUp),window.removeEventListener(\"mouseMove\",this.onMouseMove)}componentWillReceiveProps(e){if(this.props.diagramEngine!==e.diagramEngine){this.props.diagramEngine.deregisterListener(this.state.diagramEngineListener);const t=e.diagramEngine.registerListener({repaintCanvas:()=>this.forceUpdate()});this.setState({diagramEngineListener:t})}}registerCanvas(){this.props.diagramEngine.setCanvas(this.ref.current),this.props.diagramEngine.iterateListeners(e=>{e.rendered&&e.rendered()})}componentDidUpdate(){this.registerCanvas()}componentDidMount(){this.onKeyUpPointer=this.onKeyUp.bind(this),this.setState({diagramEngineListener:this.props.diagramEngine.registerListener({repaintCanvas:()=>{this.forceUpdate()}})}),window.addEventListener(\"keyup\",this.onKeyUpPointer,!1),window.focus(),this.registerCanvas()}fireAction(){this.state.action&&this.props.actionStillFiring&&this.props.actionStillFiring(this.state.action)}stopFiringAction(e){this.props.actionStoppedFiring&&!e&&this.props.actionStoppedFiring(this.state.action),this.setState({action:null})}startFiringAction(e){var t=!0;this.props.actionStartedFiring&&(t=this.props.actionStartedFiring(e)),t&&this.setState({action:e})}drawSelectionBox(){let e=this.state.action.getBoxDimensions();return s.createElement(\"div\",{className:this.bem(\"__selector\"),style:{top:e.top,left:e.left,width:e.width,height:e.height}})}getActionForEvent(e){e.persist();const{diagramEngine:t}=this.props,i=t.getMouseElement(e),s={selectedModel:i&&i.model,selectedEntity:i&&i.element,mouseEvent:e};for(let i of t.getActionFactories().getFactories())if(i.activate(s))return i.generateAction(e);return null}render(){const e=this.props.diagramEngine,t=e.getDiagramModel();return s.createElement(\"div\",Object.assign({},this.getProps(),{ref:this.ref,onWheel:e=>{if(null==this.props.allowCanvasZoom||this.props.allowCanvasZoom){e.stopPropagation();const i=t.getZoomLevel()/100;let s=this.props.inverseZoom?-e.deltaY:e.deltaY;e.ctrlKey&&s%1!=0?s/=3:s/=60,t.getZoomLevel()+s>10&&t.setZoomLevel(t.getZoomLevel()+s);const o=t.getZoomLevel()/100,n=e.currentTarget.getBoundingClientRect(),r=n.width,a=n.height,l=r*o-r*i,c=a*o-a*i,d=e.clientX-n.left,h=e.clientY-n.top,u=(d-t.getOffsetX())/i/r,g=(h-t.getOffsetY())/i/a;t.setOffset(t.getOffsetX()-l*u,t.getOffsetY()-c*g),this.forceUpdate()}},onMouseDown:t=>{const i=this.getActionForEvent(t);if(i){if(i instanceof a.AbstractMouseAction){const s=e.getMouseElement(t);i.fireMouseDown({mouseEvent:t,selectedEntity:s&&s.element,selectedModel:s&&s.model})}this.startFiringAction(i)}document.addEventListener(\"mousemove\",this.onMouseMove),document.addEventListener(\"mouseup\",this.onMouseUp)}}),s.createElement(n.LinkLayerWidget,{diagramEngine:e,pointAdded:(t,i)=>{document.addEventListener(\"mousemove\",this.onMouseMove),document.addEventListener(\"mouseup\",this.onMouseUp),i.stopPropagation();let s=null,o=null;try{o=e.getActionFactories().getFactory(d.MoveItemsActionFactory.NAME)}catch(e){}o&&((s=o.generateAction(i)).fireMouseDown({selectedModel:t,selectedEntity:i.target,mouseEvent:i}),this.startFiringAction(s))}}),s.createElement(r.NodeLayerWidget,{diagramEngine:e}),this.state.action instanceof l.SelectingAction&&this.drawSelectionBox())}}},function(e,t,i){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const s=i(1),o=i(42);var n;!function(e){e.Label=o.default.div`\n\t\tdisplay: inline-block;\n\t\tposition: absolute;\n\t`,e.Foreign=o.default.foreignObject`\n\t\tpointer-events: none;\n\t`}(n||(n={}));t.LabelWidget=class extends s.Component{constructor(e){super(e),this.findPathAndRelativePositionToRenderLabel=e=>{const t=this.props.label.getParent(),i=t.getRenderedPath().map(e=>e.getTotalLength());let s=i.reduce((e,t)=>e+t,0)*(e/(t.getLabels().length+1)),o=0;for(;o<t.getRenderedPath().length;){if(s-i[o]<0)return{path:t.getRenderedPath()[o],position:s};s-=i[o],o++}},this.calculateLabelPosition=()=>{const e=this.findPathAndRelativePositionToRenderLabel(this.props.index+1);if(!e)return;const{path:t,position:i}=e,s=this.ref.current.offsetWidth,o=this.ref.current.offsetHeight,n=t.getPointAtLength(i),r=n.x-s/2+this.props.label.getOptions().offsetX,a=n.y-o/2+this.props.label.getOptions().offsetY;this.ref.current.style.transform=`translate(${r}px, ${a}px)`},this.ref=s.createRef()}componentDidUpdate(){window.requestAnimationFrame(this.calculateLabelPosition)}componentDidMount(){window.requestAnimationFrame(this.calculateLabelPosition)}render(){const e=this.props.engine.canvas;return s.createElement(n.Foreign,{key:this.props.label.getID(),width:e.offsetWidth,height:e.offsetHeight},s.createElement(n.Label,{ref:this.ref},this.props.engine.getFactoryForLabel(this.props.label).generateReactWidget({model:this.props.label})))}}},function(e,t){e.exports=require(\"@emotion/styled\")},function(e,t,i){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const s=i(1),o=i(0),n=i(2),r=i(5);t.PortWidget=class extends n.BaseWidget{constructor(e){super(\"srd-port\",e),this.ref=s.createRef(),this.state={selected:!1}}report(){this.props.port.updateCoords(this.props.engine.getPortCoords(this.props.port,this.ref.current))}componentWillUnmount(){this.engineListenerHandle.deregister()}componentDidUpdate(e,t,i){this.props.port.reportedPosition||this.report()}componentDidMount(){this.engineListenerHandle=this.props.engine.registerListener({canvasReady:()=>{this.report()}}),this.props.engine.canvas&&this.report()}getClassName(){return\"port \"+super.getClassName()+(this.state.selected?this.bem(\"--selected\"):\"\")}getExtraProps(){return r.Toolkit.TESTING?{\"data-links\":o.keys(this.props.port.getNode().getPort(this.props.port.getName()).links).join(\",\")}:{}}render(){return s.createElement(\"div\",Object.assign({ref:this.ref},this.getProps(),{onMouseEnter:()=>{this.setState({selected:!0})},onMouseLeave:()=>{this.setState({selected:!1})},\"data-name\":this.props.port.getName(),\"data-nodeid\":this.props.port.getNode().getID()},this.getExtraProps()))}}},function(e,t,i){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const s=i(22),o=i(20),n=i(9),r=i(10),a=i(5);t.DiagramEngine=class extends n.BaseObserver{constructor(){super(),this.maxNumberPointsPerLink=1e3,this.diagramModel=new s.DiagramModel,this.nodeFactories=new o.FactoryBank,this.linkFactories=new o.FactoryBank,this.portFactories=new o.FactoryBank,this.labelFactories=new o.FactoryBank,this.actionFactories=new o.FactoryBank;const e=e=>{e.registerListener({factoryAdded:e=>{e.factory.setDiagramEngine(this)},factoryRemoved:e=>{e.factory.setDiagramEngine(null)}})};e(this.nodeFactories),e(this.linkFactories),e(this.portFactories),e(this.labelFactories),e(this.actionFactories),this.canvas=null}repaintCanvas(){this.iterateListeners(e=>{e.repaintCanvas&&e.repaintCanvas()})}getMouseElement(e){var t=e.target,i=this.diagramModel,s=a.Toolkit.closest(t,\".port[data-name]\");if(s){var o=a.Toolkit.closest(t,\".node[data-nodeid]\");return{model:i.getNode(o.getAttribute(\"data-nodeid\")).getPort(s.getAttribute(\"data-name\")),element:s}}return(s=a.Toolkit.closest(t,\".point[data-id]\"))?{model:i.getLink(s.getAttribute(\"data-linkid\")).getPointModel(s.getAttribute(\"data-id\")),element:s}:(s=a.Toolkit.closest(t,\"[data-linkid]\"))?{model:i.getLink(s.getAttribute(\"data-linkid\")),element:s}:(s=a.Toolkit.closest(t,\".node[data-nodeid]\"))?{model:i.getNode(s.getAttribute(\"data-nodeid\")),element:s}:null}isModelLocked(e){return!!this.diagramModel.isLocked()||e.isLocked()}setCanvas(e){this.canvas!==e&&(this.canvas=e,e&&this.fireEvent({},\"canvasReady\"))}setDiagramModel(e){this.diagramModel=e}getDiagramModel(){return this.diagramModel}\n//!-------------- FACTORIES ------------\ngetNodeFactories(){return this.nodeFactories}getLinkFactories(){return this.linkFactories}getLabelFactories(){return this.labelFactories}getPortFactories(){return this.portFactories}getActionFactories(){return this.actionFactories}getFactoryForNode(e){return\"string\"==typeof e?this.nodeFactories.getFactory(e):this.nodeFactories.getFactory(e.getType())}getFactoryForLink(e){return\"string\"==typeof e?this.linkFactories.getFactory(e):this.linkFactories.getFactory(e.getType())}getFactoryForLabel(e){return\"string\"==typeof e?this.labelFactories.getFactory(e):this.labelFactories.getFactory(e.getType())}getFactoryForPort(e){return\"string\"==typeof e?this.portFactories.getFactory(e):this.portFactories.getFactory(e.getType())}generateWidgetForLink(e){return this.getFactoryForLink(e).generateReactWidget({model:e})}generateWidgetForNode(e){return this.getFactoryForNode(e).generateReactWidget({model:e})}getRelativeMousePoint(e){var t=this.getRelativePoint(e.clientX,e.clientY);return new r.Point((t.x-this.diagramModel.getOffsetX())/(this.diagramModel.getZoomLevel()/100),(t.y-this.diagramModel.getOffsetY())/(this.diagramModel.getZoomLevel()/100))}getRelativePoint(e,t){var i=this.canvas.getBoundingClientRect();return new r.Point(e-i.left,t-i.top)}getNodeElement(e){const t=this.canvas.querySelector(`.node[data-nodeid=\"${e.getID()}\"]`);if(null===t)throw new Error(\"Cannot find Node element with nodeID: [\"+e.getID()+\"]\");return t}getNodePortElement(e){var t=this.canvas.querySelector(`.port[data-name=\"${e.getName()}\"][data-nodeid=\"${e.getParent().getID()}\"]`);if(null===t)throw new Error(\"Cannot find Node Port element with nodeID: [\"+e.getParent().getID()+\"] and name: [\"+e.getName()+\"]\");return t}getPortCenter(e){var t=this.getNodePortElement(e),i=t.getBoundingClientRect(),s=this.getRelativePoint(i.left,i.top);return new r.Point(t.offsetWidth/2+(s.x-this.diagramModel.getOffsetX())/(this.diagramModel.getZoomLevel()/100),t.offsetHeight/2+(s.y-this.diagramModel.getOffsetY())/(this.diagramModel.getZoomLevel()/100))}getPortCoords(e,t){if(!this.canvas)throw new Error(\"Canvas needs to be set first\");t||(t=this.getNodePortElement(e));const i=t.getBoundingClientRect(),s=this.canvas.getBoundingClientRect();return{x:(i.left-this.diagramModel.getOffsetX())/(this.diagramModel.getZoomLevel()/100)-s.left,y:(i.top-this.diagramModel.getOffsetY())/(this.diagramModel.getZoomLevel()/100)-s.top,width:i.width,height:i.height}}getNodeDimensions(e){if(!this.canvas)return{width:0,height:0};const t=this.getNodeElement(e).getBoundingClientRect();return{width:t.width,height:t.height}}getMaxNumberPointsPerLink(){return this.maxNumberPointsPerLink}setMaxNumberPointsPerLink(e){this.maxNumberPointsPerLink=e}zoomToFit(){const e=this.canvas.clientWidth/this.canvas.scrollWidth,t=this.canvas.clientHeight/this.canvas.scrollHeight,i=e<t?e:t;this.diagramModel.setZoomLevel(this.diagramModel.getZoomLevel()*i),this.diagramModel.setOffset(0,0),this.repaintCanvas()}}}])});","!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define([],t):\"object\"==typeof exports?exports[\"projectstorm/react-diagrams-defaults\"]=t():e[\"projectstorm/react-diagrams-defaults\"]=t()}(window,function(){return function(e){var t={};function o(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,o),r.l=!0,r.exports}return o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,\"a\",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p=\"\",o(o.s=14)}([function(e,t){e.exports=require(\"@projectstorm/react-diagrams-core\")},function(e,t){e.exports=require(\"react\")},function(e,t){e.exports=require(\"@emotion/styled\")},function(e,t,o){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=o(0);t.DefaultLabelModel=class extends n.LabelModel{constructor(e={}){super(Object.assign({},e,{offsetY:null==e.offsetY?-23:e.offsetY,type:\"default\"}))}setLabel(e){this.options.label=e}deSerialize(e,t){super.deSerialize(e,t),this.options.label=e.label}serialize(){return Object.assign({},super.serialize(),{label:this.options.label})}}},function(e,t,o){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=o(0),r=o(3),s=o(17);t.DefaultLinkModel=class extends n.LinkModel{constructor(e={}){super(Object.assign({type:\"default\",width:e.width||3,color:e.color||\"gray\",selectedColor:e.selectedColor||\"rgb(0,192,255)\",curvyness:50},e))}calculateControlOffset(e){return e.getOptions().alignment===n.PortModelAlignment.RIGHT?[this.options.curvyness,0]:e.getOptions().alignment===n.PortModelAlignment.LEFT?[-this.options.curvyness,0]:e.getOptions().alignment===n.PortModelAlignment.TOP?[0,-this.options.curvyness]:[0,this.options.curvyness]}getSVGPath(){if(2==this.points.length){const e=new s.BezierCurve;return e.setSource(this.getFirstPoint().getPosition()),e.setTarget(this.getLastPoint().getPosition()),e.setSourceControl(this.getFirstPoint().getPosition().clone()),e.setTargetControl(this.getLastPoint().getPosition().clone()),this.sourcePort&&e.getSourceControl().translate(...this.calculateControlOffset(this.getSourcePort())),this.targetPort&&e.getTargetControl().translate(...this.calculateControlOffset(this.getTargetPort())),e.getSVGCurve()}}serialize(){return Object.assign({},super.serialize(),{width:this.options.width,color:this.options.color,curvyness:this.options.curvyness,selectedColor:this.options.selectedColor})}deSerialize(e,t){super.deSerialize(e,t),this.options.color=e.color,this.options.width=e.width,this.options.curvyness=e.curvyness,this.options.selectedColor=e.selectedColor}addLabel(e){if(e instanceof n.LabelModel)return super.addLabel(e);let t=new r.DefaultLabelModel;return t.setLabel(e),super.addLabel(t)}setWidth(e){this.options.width=e,this.fireEvent({width:e},\"widthChanged\")}setColor(e){this.options.color=e,this.fireEvent({color:e},\"colorChanged\")}}},function(e,t,o){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=o(0),r=o(4);class s extends n.PortModel{constructor(e,t,o){t&&(e={in:!!e,name:t,label:o}),e=e,super(Object.assign({label:e.label||e.name,alignment:e.in?n.PortModelAlignment.LEFT:n.PortModelAlignment.RIGHT,type:\"default\"},e))}deSerialize(e,t){super.deSerialize(e,t),this.options.in=e.in,this.options.label=e.label}serialize(){return Object.assign({},super.serialize(),{in:this.options.in,label:this.options.label})}link(e,t){let o=this.createLinkModel(t);return o.setSourcePort(this),o.setTargetPort(e),o}canLinkToPort(e){return!(e instanceof s)||this.options.in!==e.getOptions().in}createLinkModel(e){let t=super.createLinkModel();return!t&&e?e.generateModel({}):t||new r.DefaultLinkModel}}t.DefaultPortModel=s},function(e,t,o){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=o(1),r=o(2);var s;!function(e){e.Label=r.default.div`\n\t\tbackground: rgba(0, 0, 0, 0.8);\n\t\tborder-radius: 5px;\n\t\tcolor: white;\n\t\tfont-size: 12px;\n\t\tpadding: 4px 8px;\n\t\tfont-family: sans-serif;\n\t\tuser-select: none;\n\t`}(s||(s={}));t.DefaultLabelWidget=class extends n.Component{render(){return n.createElement(s.Label,null,this.props.model.getOptions().label)}}},function(e,t,o){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=o(1),r=o(0),s=o(8),i=o(9);t.DefaultLinkWidget=class extends n.Component{constructor(e){super(e),this.addPointToLink=(e,t)=>{if(!e.shiftKey&&!this.props.diagramEngine.isModelLocked(this.props.link)&&this.props.link.getPoints().length-1<=this.props.diagramEngine.getMaxNumberPointsPerLink()){const o=new r.PointModel({link:this.props.link,position:this.props.diagramEngine.getRelativeMousePoint(e)});this.props.link.addPoint(o,t),this.forceUpdate(),this.props.pointAdded(o,e)}},this.refPaths=[],this.state={selected:!1}}componentDidUpdate(){this.props.link.setRenderedPaths(this.refPaths.map(e=>e.current))}componentDidMount(){this.props.link.setRenderedPaths(this.refPaths.map(e=>e.current))}componentWillUnmount(){this.props.link.setRenderedPaths([])}generatePoint(e){return n.createElement(s.DefaultLinkPointWidget,{key:e.getID(),point:e,colorSelected:this.props.link.getOptions().selectedColor,color:this.props.link.getOptions().color})}generateLink(e,t,o){const r=n.createRef();return this.refPaths.push(r),n.createElement(i.DefaultLinkSegmentWidget,{key:`link-${o}`,path:e,selected:this.state.selected,diagramEngine:this.props.diagramEngine,factory:this.props.diagramEngine.getFactoryForLink(this.props.link),link:this.props.link,forwardRef:r,onSelection:e=>{this.setState({selected:e})},extras:t})}render(){var e=this.props.link.getPoints(),t=[];if(this.refPaths=[],2===e.length)t.push(this.generateLink(this.props.link.getSVGPath(),{onMouseDown:e=>{this.addPointToLink(e,1)}},\"0\")),null==this.props.link.getTargetPort()&&t.push(this.generatePoint(e[1]));else{for(let o=0;o<e.length-1;o++)t.push(this.generateLink(r.Toolkit.generateLinePath(e[o],e[o+1]),{\"data-linkid\":this.props.link.getID(),\"data-point\":o,onMouseDown:e=>{this.addPointToLink(e,o+1)}},o));for(let o=1;o<e.length-1;o++)t.push(this.generatePoint(e[o]));null==this.props.link.getTargetPort()&&t.push(this.generatePoint(e[e.length-1]))}return t}}},function(e,t,o){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=o(1);t.DefaultLinkPointWidget=class extends n.Component{constructor(e){super(e),this.state={selected:!1}}render(){const{point:e}=this.props;return n.createElement(\"g\",null,n.createElement(\"circle\",{cx:e.getPosition().x,cy:e.getPosition().y,r:5,fill:this.state.selected||this.props.point.isSelected()?this.props.colorSelected:this.props.color}),n.createElement(\"circle\",{className:\"point\",onMouseLeave:()=>{this.setState({selected:!1})},onMouseEnter:()=>{this.setState({selected:!0})},\"data-id\":e.getID(),\"data-linkid\":e.getLink().getID(),cx:e.getPosition().x,cy:e.getPosition().y,r:15,opacity:0}))}}},function(e,t,o){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=o(1);t.DefaultLinkSegmentWidget=class extends n.Component{render(){const e=n.cloneElement(this.props.factory.generateLinkSegment(this.props.link,this.props.selected||this.props.link.isSelected(),this.props.path),{ref:this.props.forwardRef}),t=n.cloneElement(e,Object.assign({},this.props.extras,{strokeLinecap:\"round\",onMouseLeave:()=>{this.props.onSelection(!1)},onMouseEnter:()=>{this.props.onSelection(!0)},ref:null,\"data-linkid\":this.props.link.getID(),strokeOpacity:this.props.selected?.1:0,strokeWidth:20,fill:\"none\",onContextMenu:()=>{this.props.diagramEngine.isModelLocked(this.props.link)||(event.preventDefault(),this.props.link.remove())}}));return n.createElement(\"g\",null,e,t)}}},function(e,t,o){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=o(11),r=o(0),s=o(5);t.DefaultNodeModel=class extends r.NodeModel{constructor(e={},t){\"string\"==typeof e&&(e={name:e,color:t}),super(Object.assign({type:\"default\",name:\"Untitled\",color:\"rgb(0,192,255)\"},e)),this.portsOut=[],this.portsIn=[]}doClone(e,t){t.portsIn=[],t.portsOut=[],super.doClone(e,t)}removePort(e){super.removePort(e),e.getOptions().in?this.portsIn.splice(this.portsIn.indexOf(e)):this.portsOut.splice(this.portsOut.indexOf(e))}addPort(e){return super.addPort(e),e.getOptions().in?-1===this.portsIn.indexOf(e)&&this.portsIn.push(e):-1===this.portsOut.indexOf(e)&&this.portsOut.push(e),e}addInPort(e,t=!0){const o=new s.DefaultPortModel({in:!0,name:e,label:e,alignment:r.PortModelAlignment.LEFT});return t||this.portsIn.splice(0,0,o),this.addPort(o)}addOutPort(e,t=!0){const o=new s.DefaultPortModel({in:!1,name:e,label:e,alignment:r.PortModelAlignment.RIGHT});return t||this.portsOut.splice(0,0,o),this.addPort(o)}deSerialize(e,t){super.deSerialize(e,t),this.options.name=e.name,this.options.color=e.color,this.portsIn=n.map(e.portsInOrder,e=>this.getPortFromID(e)),this.portsOut=n.map(e.portsOutOrder,e=>this.getPortFromID(e))}serialize(){return Object.assign({},super.serialize(),{name:this.options.name,color:this.options.color,portsInOrder:n.map(this.portsIn,e=>e.getID()),portsOutOrder:n.map(this.portsOut,e=>e.getID())})}getInPorts(){return this.portsIn}getOutPorts(){return this.portsOut}}},function(e,t){e.exports=require(\"lodash\")},function(e,t,o){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=o(1),r=o(11),s=o(13),i=o(2);var l;!function(e){e.Node=i.default.div`\n\t\tbackground-color: ${e=>e.background};\n\t\tborder-radius: 5px;\n\t\tfont-family: sans-serif;\n\t\tcolor: white;\n\t\tborder: solid 2px black;\n\t\toverflow: visible;\n\t\tfont-size: 11px;\n\t`,e.Title=i.default.div`\n\t\tbackground: rgba(0, 0, 0, 0.3);\n\t\tdisplay: flex;\n\t\twhite-space: nowrap;\n\t\tjustify-items: center;\n\t`,e.TitleName=i.default.div`\n\t\tflex-grow: 1;\n\t\tpadding: 5px 5px;\n\t`,e.Ports=i.default.div`\n\t\tdisplay: flex;\n\t\tbackground-image: linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.2));\n\t`,e.PortsContainer=i.default.div`\n\t\tflex-grow: 1;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\n\t\t&:first-child {\n\t\t\tmargin-right: 10px;\n\t\t}\n\n\t\t&:only-child {\n\t\t\tmargin-right: 0px;\n\t\t}\n\t`}(l||(l={}));t.DefaultNodeWidget=class extends n.Component{constructor(){super(...arguments),this.generatePort=e=>n.createElement(s.DefaultPortLabel,{engine:this.props.engine,port:e,key:e.id})}render(){return n.createElement(l.Node,{background:this.props.node.getOptions().color},n.createElement(l.Title,null,n.createElement(l.TitleName,null,this.props.node.getOptions().name)),n.createElement(l.Ports,null,n.createElement(l.PortsContainer,null,r.map(this.props.node.getInPorts(),this.generatePort)),n.createElement(l.PortsContainer,null,r.map(this.props.node.getOutPorts(),this.generatePort))))}}},function(e,t,o){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=o(1),r=o(0),s=o(2);var i;!function(e){e.PortLabel=s.default.div`\n\t\tdisplay: flex;\n\t\tmargin-top: 1px;\n\t\talign-items: center;\n\t`,e.Label=s.default.div`\n\t\tpadding: 0 5px;\n\t`}(i||(i={}));t.DefaultPortLabel=class extends n.Component{render(){const e=n.createElement(r.PortWidget,{engine:this.props.engine,port:this.props.port}),t=n.createElement(i.Label,null,this.props.port.getOptions().label);return n.createElement(i.PortLabel,null,this.props.port.getOptions().in?e:t,this.props.port.getOptions().in?t:e)}}},function(e,t,o){\"use strict\";function n(e){for(var o in e)t.hasOwnProperty(o)||(t[o]=e[o])}Object.defineProperty(t,\"__esModule\",{value:!0}),n(o(15)),n(o(3)),n(o(6)),n(o(16)),n(o(4)),n(o(7)),n(o(9)),n(o(8)),n(o(19)),n(o(10)),n(o(12)),n(o(20)),n(o(13)),n(o(5))},function(e,t,o){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=o(1),r=o(0),s=o(3),i=o(6);t.DefaultLabelFactory=class extends r.AbstractReactFactory{constructor(){super(\"default\")}generateReactWidget(e){return n.createElement(i.DefaultLabelWidget,{model:e.model})}generateModel(e){return new s.DefaultLabelModel}}},function(e,t,o){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=o(1),r=o(0),s=o(4),i=o(7),l=o(2),a=o(18);var c;!function(e){e.Keyframes=a.keyframes`\n\t\tfrom {\n\t\t\tstroke-dashoffset: 24;\n\t\t}\n\t\tto {\n\t\t\tstroke-dashoffset: 0;\n\t\t}\n\t`;const t=a.css`\n\t\tstroke-dasharray: 10, 2;\n\t\tanimation: ${e.Keyframes} 1s linear infinite;\n\t`;e.Path=l.default.path`\n\t\t${e=>e.selected&&t};\n\t\tfill: none;\n\t\tpointer-events: all;\n\t`}(c||(c={}));t.DefaultLinkFactory=class extends r.AbstractReactFactory{constructor(e=\"default\"){super(e)}generateReactWidget(e){return n.createElement(i.DefaultLinkWidget,{link:e.model,diagramEngine:this.engine})}generateModel(e){return new s.DefaultLinkModel}generateLinkSegment(e,t,o){return n.createElement(c.Path,{selected:t,stroke:t?e.getOptions().selectedColor:e.getOptions().color,strokeWidth:e.getOptions().width,d:o})}}},function(e,t){e.exports=require(\"@projectstorm/react-diagrams-geometry\")},function(e,t){e.exports=require(\"@emotion/core\")},function(e,t,o){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=o(1),r=o(0),s=o(10),i=o(12);t.DefaultNodeFactory=class extends r.AbstractReactFactory{constructor(){super(\"default\")}generateReactWidget(e){return n.createElement(i.DefaultNodeWidget,{engine:this.engine,node:e.model})}generateModel(e){return new s.DefaultNodeModel}}},function(e,t,o){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=o(0),r=o(5);t.DefaultPortFactory=class extends n.AbstractModelFactory{constructor(){super(\"default\")}generateModel(){return new r.DefaultPortModel({name:\"unknown\"})}}}])});"],"mappings":"AACA;;ACoDA;AAUA;AAAA;;AC7BA;;AAKA;;;ACpCA;;AAHA;;AAOA;;;;;;;;ACPA;AASA;;;;;;;AAOA;;;;;AAKA;;;AAGA;;;AAGA;;;;;;;;;;;;AAnBA;;;;AAmCA;;AAJA;;;;;;;AAaA;;AAEA;AACA;AACA;;;AAXA","sourceRoot":""}